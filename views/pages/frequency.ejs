<div class="glass-card" style="max-width: 600px; margin: 0 auto;">
    <h1 style="margin-bottom: 2rem; text-align: center;">Frequency Generator</h1>

    <div class="form-group">
        <label>Frequency (Hz)</label>
        <input type="number" id="freq-val" value="440" min="20" max="20000" oninput="updateFreq(this.value)">
        <input type="range" id="freq-slider" min="20" max="20000" value="440" oninput="updateFreq(this.value)"
            style="width: 100%; margin-top: 1rem;">
    </div>

    <div class="form-group">
        <label>Wave Type</label>
        <select id="wave-type" onchange="updateType(this.value)">
            <option value="sine">Sine</option>
            <option value="square">Square</option>
            <option value="sawtooth">Sawtooth</option>
            <option value="triangle">Triangle</option>
        </select>
    </div>

    <button id="toggle-btn" class="primary-btn" onclick="toggleOscillator()">Start</button>
</div>

<script>
    let audioCtx;
    let oscillator;
    let isPlaying = false;

    function initAudio() {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }

    function toggleOscillator() {
        initAudio();
        const btn = document.getElementById('toggle-btn');

        if (isPlaying) {
            oscillator.stop();
            oscillator.disconnect();
            isPlaying = false;
            btn.innerText = "Start";
            btn.style.background = "var(--primary)";
        } else {
            oscillator = audioCtx.createOscillator();
            oscillator.type = document.getElementById('wave-type').value;
            oscillator.frequency.value = document.getElementById('freq-val').value;
            oscillator.connect(audioCtx.destination);
            oscillator.start();
            isPlaying = true;
            btn.innerText = "Stop";
            btn.style.background = "#ef4444";
        }
    }

    function updateFreq(val) {
        document.getElementById('freq-val').value = val;
        document.getElementById('freq-slider').value = val;
        if (oscillator && isPlaying) {
            oscillator.frequency.value = val;
        }
    }

    function updateType(type) {
        if (oscillator && isPlaying) {
            oscillator.type = type;
        }
    }
</script>