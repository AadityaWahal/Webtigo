<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="12uCiJpKQjiUNhJ1NcfriED4-pmNfedVJroRTKthng8">
  <meta name="description"
    content="<%= typeof description !== 'undefined' ? description : 'Webtigo provides free, premium web tools for PDF creation, image compression, text-to-speech, QR code generation. Fast, secure, and user-friendly.' %>">
  <meta name="keywords"
    content="<%= typeof keywords !== 'undefined' ? keywords : 'pdf tools, image compressor, qr code generator, online tools, free web tools' %>">
  <meta name="author" content="Webtigo">
  <link rel="icon" href="/logo.png" type="image/png">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://webtigo.vercel.app/">
  <meta property="og:title" content="<%= title %>">
  <meta property="og:description"
    content="Free premium web tools for everyday tasks. PDF, Images, Audio, and Text utilities.">
  <meta property="og:image" content="https://webtigo.vercel.app/og-image.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://webtigo.vercel.app/">
  <meta property="twitter:title" content="<%= title %>">
  <meta property="twitter:description" content="Free premium web tools for everyday tasks.">

  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#0f172a">
  <meta name="application-name" content="Webtigo">
  <meta name="apple-mobile-web-app-title" content="Webtigo">
  <link rel="canonical" href="https://webtigo.vercel.app<%= typeof currentPath !== 'undefined' ? currentPath : '' %>">

  <meta property="og:site_name" content="Webtigo">
  <meta name="twitter:creator" content="@webtigo">
  <meta name="twitter:image" content="https://webtigo.vercel.app/og-image.jpg">

  <!-- Schema.org JSON-LD for Sitelinks -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "url": "https://webtigo.vercel.app/",
        "name": "Webtigo",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://webtigo.vercel.app/search?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Text to Speech",
        "url": "https://webtigo.vercel.app/tts"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Image Compressor",
        "url": "https://webtigo.vercel.app/compressor"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "QR Code Generator",
        "url": "https://webtigo.vercel.app/qrcode"
      },
      {
        "@type": "SiteNavigationElement",
        "name": "Premium Tools",
        "url": "https://webtigo-premium.vercel.app/"
      }
    ]
  }
  </script>

  <title>
    <%= title %>
  </title>
  <link rel="stylesheet" href="/css/globals.css">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Clerk Auth -->
  <script async crossorigin="anonymous" data-clerk-publishable-key="<%= clerkKey %>"
    src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js" type="text/javascript"></script>
  <script>
    window.addEventListener("load", async function () {
      await Clerk.load();

      // Update UI based on auth state
      const userButton = document.getElementById("user-button");
      const authLinks = document.getElementById("auth-links");

      if (Clerk.user) {
        Clerk.mountUserButton(userButton);
        authLinks.style.display = 'none';
      } else {
        userButton.style.display = 'none';
        authLinks.style.display = 'flex';
      }

      // Mount Sign In component if the container exists (fixes race condition)
      const signInDiv = document.getElementById("sign-in");
      if (signInDiv) {
        Clerk.mountSignIn(signInDiv);
      }
    });
  </script>
</head>

<body>
  <nav class="navbar">
    <div class="logo" style="display: flex; align-items: center; gap: 10px;">
      <img src="/logo.png" alt="Webtigo Logo" style="height: 40px; width: auto;">
      <span>Webtigo</span>
    </div>
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="https://webtigo-premium.vercel.app/" target="_blank" class="premium-link">Premium</a>
      <div id="auth-links">
        <a href="/signin" class="btn-signin">Sign In</a>
      </div>
      <div id="user-button"></div>
    </div>
  </nav>

  <main class="container">
    <%- body %>
  </main>

  <footer>
    <p>&copy; 2024 Webtigo. All rights reserved.</p>
  </footer>

  <script>
    // Scroll Reveal Animation (Apple Style)
    document.addEventListener("DOMContentLoaded", function () {
      // 1. Enable JS animations only if JS loads
      document.body.classList.add('js-enabled');

      // 2. Fallback: If IntersectionObserver is not supported, reveal all immediately
      if (!('IntersectionObserver' in window)) {
        document.querySelectorAll('.tool-card').forEach(card => card.classList.add('reveal'));
        return;
      }

      const observerIn = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('reveal');
            observerIn.unobserve(entry.target); // Performance: stop observing once revealed
          }
        });
      }, { threshold: 0.1, rootMargin: "50px" }); // Increased margin to trigger earlier

      const cards = document.querySelectorAll('.tool-card');
      cards.forEach((card, index) => {
        card.style.transitionDelay = `${index * 50}ms`; // Stagger effect
        observerIn.observe(card);
      });

      // Safety net: Force reveal after 1 seconds regardless of scroll
      setTimeout(() => {
        cards.forEach(card => card.classList.add('reveal'));
      }, 2000);
    });
  </script>
</body>

</html>